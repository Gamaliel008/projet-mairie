<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ville - Mot du Maire, Galerie & Projets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Un gris-bleu clair plus doux */
        }
        /* Style pour l'image de fond du carrousel */
        .carousel-bg {
            background-size: cover;
            background-position: center;
            /* Filtre léger pour améliorer le contraste du texte */
            background-blend-mode: multiply;
            background-color: rgba(30, 64, 175, 0.2); /* blue-700 avec opacité */
        }
        /* Masquage de la scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db, auth;

        if (firebaseConfig) {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                async function authenticate() {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                        console.log("Firebase signed in with custom token.");
                    } else {
                        await signInAnonymously(auth);
                        console.log("Firebase signed in anonymously.");
                    }
                }
                authenticate();
            } catch (error) {
                console.error("Firebase initialization failed:", error);
            }
        } else {
            console.warn("Firebase configuration not found. Running in standalone mode.");
        }
    </script>

    <header class="bg-white shadow-lg sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5">
            <h1 class="text-3xl font-bold text-blue-700 tracking-tight">Mairie de la Ville</h1>
            <nav class="hidden md:block">
                <ul class="flex space-x-6 mt-2">
                    <li><a href="#mot-du-maire" class="text-gray-600 hover:text-blue-600 transition duration-150 font-medium">Mot du Maire</a></li>
                    <li><a href="#galerie-mairie" class="text-gray-600 hover:text-blue-600 transition duration-150 font-medium">Galerie</a></li>
                    <li><a href="#projets-phares" class="text-gray-600 hover:text-blue-600 transition duration-150 font-medium">Projets</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <section id="mot-du-maire" class="bg-white p-4 rounded-3xl shadow-2xl">
            <h2 class="text-4xl font-extrabold text-center mb-10 text-gray-800 border-b-4 border-blue-600 pb-3">Mot du Maire</h2>

            <div id="carousel-container" class="relative overflow-hidden rounded-2xl shadow-inner">
                <div id="carousel-wrapper" class="flex transition-transform duration-700 ease-in-out">
                    </div>

                <button onclick="prevSlide()" aria-label="Slide précédente" class="absolute top-1/2 left-0 transform -translate-y-1/2 bg-white/50 hover:bg-white p-3 rounded-full shadow-xl ml-4 transition z-10 focus:outline-none focus:ring-4 focus:ring-blue-500/50">
                    <svg class="w-7 h-7 text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <button onclick="nextSlide()" aria-label="Slide suivante" class="absolute top-1/2 right-0 transform -translate-y-1/2 bg-white/50 hover:bg-white p-3 rounded-full shadow-xl mr-4 transition z-10 focus:outline-none focus:ring-4 focus:ring-blue-500/50">
                    <svg class="w-7 h-7 text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>

            <div id="carousel-indicators" class="flex justify-center space-x-2 mt-6">
                </div>
        </section>

        <section id="galerie-mairie" class="bg-white p-6 md:p-10 rounded-3xl shadow-2xl">
            <h2 class="text-4xl font-extrabold text-center mb-8 text-gray-800 border-b-4 border-emerald-500 pb-3">Galerie de la Mairie</h2>
            <p class="text-center text-gray-600 mb-10 text-lg">Quelques clichés des événements marquants et du quotidien de l'administration municipale.</p>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="./Capture d'écran 2025-10-26 212719.png" alt="Vue de la Mairie" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110" onerror="this.onerror=null; this.src='https://placehold.co/600x400/34d399/ffffff?text=Mairie+Vue+1'">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="./jcq1.jpeg" alt="Événement communautaire" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110" onerror="this.onerror=null; this.src='https://placehold.co/600x400/60a5fa/ffffff?text=Événement+2'">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="./jcq2.jpeg" alt="Inauguration" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110" onerror="this.onerror=null; this.src='https://placehold.co/600x400/a78bfa/ffffff?text=Inauguration+3'">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="./jcq3.jpeg" alt="Travaux de voirie" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110" onerror="this.onerror=null; this.src='https://placehold.co/600x400/fcd34d/ffffff?text=Voirie+4'">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="https://placehold.co/600x400/fb923c/ffffff?text=Espace+Vert" alt="Espace Vert en ville" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="https://placehold.co/600x400/38bdf8/ffffff?text=Bibliothèque" alt="Bibliothèque Municipale" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="https://placehold.co/600x400/14b8a6/ffffff?text=Citoyens" alt="Citoyens et Maire" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110">
                </div>
                <div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition duration-500 transform hover:-translate-y-1 group">
                    <img src="https://placehold.co/600x400/f87171/ffffff?text=Sport" alt="Équipement Sportif" class="w-full h-56 object-cover transition duration-500 group-hover:scale-110">
                </div>
            </div>
        </section>

        <section id="projets-phares" class="bg-white p-6 md:p-10 rounded-3xl shadow-2xl">
            <h2 class="text-4xl font-extrabold text-center mb-8 text-gray-800 border-b-4 border-red-600 pb-3">Projets Phares</h2>
            <p class="text-center text-gray-600 mb-12 text-lg">Découvrez les initiatives clés qui façonnent l'avenir de notre ville, avec une vision à long terme.</p>

            <div class="grid md:grid-cols-3 gap-8">

                <div class="bg-gray-50 p-6 rounded-xl shadow-xl border-t-8 border-red-600 hover:shadow-2xl transition duration-300 transform hover:scale-[1.02]">
                    <h3 class="text-2xl font-bold text-gray-800 mb-3">Rénovation Urbaine</h3>
                    <p class="text-gray-600 mb-4 text-justify">Programme de réhabilitation des axes routiers principaux et de l'éclairage public pour améliorer la qualité de vie et la sécurité des habitants. Une étape essentielle pour une ville moderne.</p>
                    <a href="#" class="inline-flex items-center text-red-600 hover:text-red-700 font-semibold transition">
                        Détails du projet
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </a>
                </div>

                <div class="bg-gray-50 p-6 rounded-xl shadow-xl border-t-8 border-red-600 hover:shadow-2xl transition duration-300 transform hover:scale-[1.02]">
                    <h3 class="text-2xl font-bold text-gray-800 mb-3">Pôle Jeunesse et Sport</h3>
                    <p class="text-gray-600 mb-4 text-justify">Construction d'un centre polyvalent dédié aux activités sportives et culturelles pour les jeunes, avec un accès libre et gratuit pour tous les résidents.</p>
                    <a href="#" class="inline-flex items-center text-red-600 hover:text-red-700 font-semibold transition">
                        Détails du projet
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </a>
                </div>

                <div class="bg-gray-50 p-6 rounded-xl shadow-xl border-t-8 border-red-600 hover:shadow-2xl transition duration-300 transform hover:scale-[1.02]">
                    <h3 class="text-2xl font-bold text-gray-800 mb-3">Ville Verte 2030</h3>
                    <p class="text-gray-600 mb-4 text-justify">Mise en place de 5000 nouveaux arbres et développement des transports en commun électriques pour réduire notre empreinte carbone. Un engagement pour l'avenir.</p>
                    <a href="#" class="inline-flex items-center text-red-600 hover:text-red-700 font-semibold transition">
                        Détails du projet
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </a>
                </div>

            </div>
        </section>

    </main>

    <footer class="bg-gray-900 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-gray-400">
            <p class="text-lg font-medium mb-1">Mairie de la Ville</p>
            <p class="text-sm">&copy; 2025 Tous droits réservés. | <a href="#" class="hover:text-blue-400 transition">Mentions Légales</a></p>
        </div>
    </footer>

    <script>
        // Définition des slides du carrousel (Ordre Décroissant - La 1ère est la plus importante/récente)
        const slides = [
            {
                image: './jcq4.jpeg',
                title: "Engagement pour une Ville Propre",
                message: "Notre engagement pour une ville propre et durable se reflète dans nos nouvelles initiatives de recyclage. Ensemble, bâtissons un avenir plus vert. C'est en unissant nos forces que nous ferons de notre ville un modèle de civisme et de responsabilité environnementale. Merci de votre collaboration.",
                fallback: 'https://placehold.co/1200x800/22c55e/ffffff?text=Mot+du+Maire+1'
            },
            {
                image: './jcq3.jpeg',
                title: "Investissement dans l'Éducation",
                message: "L'éducation est la clé de notre avenir. Nous investissons massivement dans la rénovation de nos écoles pour offrir le meilleur environnement d'apprentissage à nos enfants. Prioriser l'excellence scolaire est notre devoir envers la nouvelle génération.",
                fallback: 'https://placehold.co/1200x800/3b82f6/ffffff?text=Mot+du+Maire+2'
            },
            {
                image: './jcq2.jpeg',
                title: "Soutien à l'Entrepreneuriat Local",
                message: "Le développement économique passe par le soutien aux petites entreprises locales. Venez découvrir nos programmes d'aide à l'entrepreneuriat qui stimulent l'emploi et l'innovation dans la région. Une économie forte est une communauté prospère.",
                fallback: 'https://placehold.co/1200x800/f97316/ffffff?text=Mot+du+Maire+3'
            },
            {
                image: './jcq1.jpeg',
                title: "Priorité à la Sécurité Citoyenne",
                message: "La sécurité de nos citoyens est notre priorité absolue. De nouvelles patrouilles de proximité sont mises en place pour assurer la tranquillité de tous et renforcer le lien de confiance avec nos forces de l'ordre. Soyez vigilants et unis.",
                fallback: 'https://placehold.co/1200x800/ef4444/ffffff?text=Mot+du+Maire+4'
            },
            {
                image: "./Capture d'écran 2025-10-26 212719.png",
                title: "Bilan Annuel et Participation",
                message: "Chers concitoyens, je suis fier de vous présenter le bilan de l'année écoulée. Votre participation et votre engagement sont essentiels pour la réussite de nos projets futurs. Continuons à bâtir notre ville ensemble, dans la transparence et le dialogue.",
                fallback: 'https://placehold.co/1200x800/8b5cf6/ffffff?text=Mot+du+Maire+5'
            }
        ];

        let currentSlide = 0;
        const wrapper = document.getElementById('carousel-wrapper');
        const indicatorsContainer = document.getElementById('carousel-indicators');

        /**
         * Génère le HTML pour les slides et les indicateurs.
         */
        function renderCarousel() {
            wrapper.innerHTML = '';
            indicatorsContainer.innerHTML = '';

            slides.forEach((slide, index) => {
                // Création de la Slide
                const slideElement = document.createElement('div');
                slideElement.className = 'w-full flex-shrink-0'; // Garder w-full et flex-shrink-0
                
                // Utilisation d'une structure en grille ou flex pour le contenu
                slideElement.innerHTML = `
                    <div class="flex flex-col md:flex-row min-h-[500px] md:min-h-[400px] bg-white rounded-xl overflow-hidden shadow-2xl">
                        
                        <div class="md:w-1/2 p-0 h-60 md:h-auto carousel-bg" 
                             style="background-image: url('${slide.image}'), url('${slide.fallback}');">
                        </div>

                        <div class="md:w-1/2 p-8 flex flex-col justify-center bg-white">
                            <h3 class="text-3xl font-extrabold text-blue-700 mb-4">${slide.title}</h3>
                            <p class="text-gray-700 leading-relaxed text-lg mb-6">${slide.message}</p>
                            <span class="mt-auto text-sm font-semibold text-gray-500 border-t pt-2">
                                Le Maire, Jean-Claude Quintus
                            </span>
                        </div>
                    </div>
                `;
                wrapper.appendChild(slideElement);

                // Création de l'Indicateur
                const indicator = document.createElement('button');
                indicator.className = `w-3 h-3 rounded-full transition duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${index === currentSlide ? 'bg-blue-600' : 'bg-gray-300 hover:bg-gray-500'}`;
                indicator.onclick = () => goToSlide(index);
                indicator.setAttribute('aria-label', `Afficher le message ${index + 1}`);
                indicatorsContainer.appendChild(indicator);
            });
            updateCarouselPosition();
        }

        /**
         * Met à jour la position du wrapper du carrousel.
         */
        function updateCarouselPosition() {
            // S'assurer que le wrapper a au moins un enfant pour calculer la largeur
            if (wrapper.children.length === 0) return;

            // Utiliser la largeur du premier enfant pour garantir la cohérence (même si w-full est appliqué)
            const slideWidth = wrapper.children[0].offsetWidth; 
            const offset = -currentSlide * slideWidth;
            wrapper.style.transform = `translateX(${offset}px)`;

            // Mise à jour des indicateurs
            const indicators = indicatorsContainer.children;
            Array.from(indicators).forEach((indicator, index) => {
                indicator.classList.remove('bg-blue-600', 'bg-gray-300', 'hover:bg-gray-500');
                if (index === currentSlide) {
                    indicator.classList.add('bg-blue-600');
                } else {
                    indicator.classList.add('bg-gray-300', 'hover:bg-gray-500');
                }
            });
        }

        /**
         * Va à la slide précédente.
         */
        window.prevSlide = function() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            updateCarouselPosition();
        };

        /**
         * Va à la slide suivante.
         */
        window.nextSlide = function() {
            currentSlide = (currentSlide + 1) % slides.length;
            updateCarouselPosition();
        };

        /**
         * Va à une slide spécifique.
         */
        window.goToSlide = function(index) {
            currentSlide = index;
            updateCarouselPosition();
        };

        // Redimensionnement et Initialisation
        // Utilisation de DOMContentLoaded pour s'assurer que le DOM est prêt avant l'exécution du script initial.
        document.addEventListener('DOMContentLoaded', renderCarousel);
        // Ajout d'un délai pour le resize pour s'assurer que les largeurs sont bien calculées après le rendu
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(updateCarouselPosition, 100);
        });

        // Optionnel : Défilement automatique toutes les 6 secondes
        setInterval(window.nextSlide, 6000);
    </script>
</body>
</html>
